// ===== _columns.scss =====
// Flexboxベースのカラムレイアウトコンポーネント
//
// 使い方1: _class: columns（スライド全体がカラムレイアウト）
// 使い方2: <div class="columns">（部分的なカラムレイアウト）
//
// ※ divタグの直後・直前に空行を入れることでMarkdownが正しく解釈される

$_column-widths: (2, 3, 4, 6, 7, 8);

// カラム要素の共通スタイル
// - flex: $n ... 比率ベースの幅指定（gapを考慮した配分になる）
//                例: column-4 + column-6 = 4:6の比率で配分
// - min-width: 0 ... Flex子要素のデフォルト値(auto)を上書きし、
//                    コンテンツサイズに関係なくflex-basisの幅を維持する
// - > *, p > * { max-width: 100% } ... 子要素および段落内の要素（画像等）をカラム幅に収める
@mixin _column-children {
  > .column {
    flex: 1;
    min-width: 0;

    > *,
    p > * {
      max-width: 100%;
    }
  }

  @each $n in $_column-widths {
    > .column-#{$n} {
      flex: $n;
      min-width: 0;

      > *,
      p > * {
        max-width: 100%;
      }
    }
  }
}

@mixin configure() {
  // 使い方1: _class: columns（section自体がFlexコンテナになる）
  &.columns {
    flex-direction: row;
    gap: 1em;
    @include _column-children;
  }

  // 使い方2: <div class="columns">（部分的なカラムレイアウト）
  .columns {
    display: flex;
    gap: 1em;
    width: 100%;
    @include _column-children;
  }
}
